CC = g++
AR = ar

OPTIM = -O3 -msse2 -msse4 -march=corei7
INCLUDE = ../../include
EIGEN = /usr/local/home/xiong/apps/eigen/include/eigen3

CFLAGS = -std=c++11

PRINT = yes
ifeq ($(PRINT), yes)
CFLAGS += -DGMRES_PRINT -DINB_PRINT
endif


RPO_OMP = yes
ifeq ($(RPO_OMP), yes)
CFLAGS += -DRPO_OMP=5
endif


SOURCE2 = cqcglRPO.cc 
SHARED2 = libcqcglRPO.so
STATIC2 = libcqcglRPO.a

all : $(SHARED2) $(STATIC2) 


$(SHARED2): $(SOURCE2)
	$(CC) -shared -fpic $(CFLAGS) $(OPTIM) -I$(INCLUDE) -I$(EIGEN) $^ -o $@
$(SOURCE2:.cc=.o) : $(SOURCE2)
	$(CC) -c $(CFLAGS) $(OPTIM) -I$(INCLUDE) -I$(EIGEN) $^
$(STATIC2): $(SOURCE2:.cc=.o)
	$(AR) crs $@ $^

clean:
	rm -f *.so *.o *.a
move:
	mv *.so *.a /usr/local/home/xiong/00git/research/lib
